<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>إدارة مهام الطلاب</title>
    
    <script type="importmap">
    {
      "imports": {
        "firebase/app": "https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js",
        "firebase/firestore": "https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore.js",
        "firebase/auth": "https://www.gstatic.com/firebasejs/9.0.0/firebase-auth.js",
        "firebase/analytics": "https://www.gstatic.com/firebasejs/9.0.0/firebase-analytics.js"
      }
    }
    </script>
    
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="app-container">
        <div id="auth-screen">
            <h2>تسجيل الدخول</h2>
            <input type="text" id="user-code" placeholder="أدخل رمز الطالب/المعلم">
            <button id="login-button">دخول</button>
            <p id="auth-message" class="message hidden"></p>
        </div>

        <div id="student-screen" class="hidden">
            <header>
                <h1 id="welcome-student"></h1>
                <button id="logout-button-student">تسجيل الخروج</button>
            </header>
            <main>
                <div class="progress-card">
                    <h3>نقاطي الكلية: <span id="student-total-points">0</span></h3>
                </div>
                <div class="progress-card">
                    <h4>تقدم الحفظ الحالي:</h4>
                    <p id="student-hifz-progress">المنهج غير مُعين</p>
                </div>
                <div class="progress-card">
                    <h4>تقدم المراجعة الحالي:</h4>
                    <p id="student-murajaa-progress">المنهج غير مُعين</p>
                </div>

                <h3>المهام الموكلة إليك:</h3>
                <div id="student-tasks">
                    </div>
            </main>
        </div>

        <div id="teacher-screen" class="hidden">
            <header>
                <h1>لوحة تحكم المعلم</h1>
                <button id="logout-button-teacher">تسجيل الخروج</button>
            </header>
            <nav class="tabs">
                <button class="tab-button active" data-tab="manage-students">إدارة الطلاب</button>
                <button class="tab-button" data-tab="add-student">إضافة طالب</button>
                <button class="tab-button" data-tab="assign-tasks">تعيين مهام</button>
                <button class="tab-button" data-tab="manage-curriculum">عرض المنهج</button>
            </nav>

            <main class="tab-content-container">
                <div id="manage-students-tab" class="tab-content">
                    <h3>قائمة الطلاب</h3>
                    <ul id="student-list">
                        </ul>
                </div>

                <div id="add-student-tab" class="tab-content hidden">
                    <h3>تسجيل طالب جديد</h3>
                    <input type="text" id="new-student-code" placeholder="رمز الطالب الجديد (مثلاً s101)">
                    <input type="text" id="new-student-name" placeholder="اسم الطالب">
                    
                    <label for="new-student-hifz-start">نقطة بداية الحفظ:</label>
                    <select id="new-student-hifz-start"></select>
                    
                    <label for="new-student-murajaa-start">نقطة بداية المراجعة:</label>
                    <select id="new-student-murajaa-start"></select>
                    
                    <button id="register-student-button">تسجيل</button>
                    <p id="register-student-message" class="message hidden"></p>
                </div>
                
                <div id="assign-tasks-tab" class="tab-content hidden">
                    <h3>تعيين مهمة</h3>
                    <input type="text" id="assign-task-student-code" placeholder="رمز الطالب الفردي (أو اتركه فارغاً للجميع)">
                    <select id="assign-task-type">
                        <option value="general">عامة</option>
                        <option value="hifz">حفظ</option>
                        <option value="murajaa">مراجعة</option>
                    </select>
                    <input type="text" id="assign-task-description" placeholder="وصف المهمة (مثلاً: حل واجب الفقه)">
                    <input type="number" id="assign-task-points" placeholder="نقاط المهمة">
                    
                    <button id="assign-individual-task-button">تعيين فردي</button>
                    <button id="assign-group-task-button">تعيين جماعي (لجميع الطلاب)</button>
                    <p id="assign-task-message" class="message hidden"></p>
                </div>

                <div id="manage-curriculum-tab" class="tab-content hidden">
                    <h3>منهج الحفظ:</h3>
                    <div id="hifz-curriculum-display"></div>
                    
                    <h3>منهج المراجعة:</h3>
                    <div id="murajaa-curriculum-display"></div>
                </div>

            </main>
        </div>
    </div>

    <script type="module" src="app.js"></script>

</body>
</html>
