<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نظام متابعة التحفيظ</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-firestore.js"></script>
</head>
<body>
    <div class="container">
        <h1>نظام متابعة التحفيظ</h1>

        <div id="auth-screen" class="screen">
            <h2>تسجيل الدخول</h2>
            <div class="form-group">
                <label for="user-code">رمز الطالب/المعلم:</label>
                <input type="text" id="user-code" placeholder="أدخل رمزك">
            </div>
            <button id="login-button" class="btn primary">دخول</button>
            <div id="auth-message" class="message hidden"></div>
        </div>

        <div id="student-screen" class="screen hidden">
            <div class="header-controls">
                <h2 id="welcome-student">مرحباً بك يا طالب!</h2>
                <button id="logout-button-student" class="btn danger">تسجيل الخروج</button>
            </div>
            
            <div class="student-dashboard">
                <div class="card">
                    <h3>التقدم في الحفظ</h3>
                    <p id="student-hifz-progress">لم يبدأ بعد</p>
                </div>
                <div class="card">
                    <h3>التقدم في المراجعة</h3>
                    <p id="student-murajaa-progress">لم يبدأ بعد</p>
                </div>
                <div class="card">
                    <h3>إجمالي النقاط</h3>
                    <p id="student-total-points">0</p>
                </div>
            </div>

            <h3>مهامك الحالية</h3>
            <div id="student-tasks" class="tasks-list">
                <p>جارٍ تحميل المهام...</p>
            </div>
        </div>

        <div id="teacher-screen" class="screen hidden">
            <div class="header-controls">
                <h2>لوحة تحكم المعلم</h2>
                <button id="logout-button-teacher" class="btn danger">تسجيل الخروج</button>
            </div>
            
            <div class="tabs">
                <button class="tab-button active" data-tab="manage-students">إدارة الطلاب</button>
                <button class="tab-button" data-tab="add-student">إضافة طالب جديد</button>
                <button class="tab-button" data-tab="assign-tasks">تعيين المهام</button>
                <button class="tab-button" data-tab="manage-curriculum">إدارة المناهج</button>
            </div>

            <div id="manage-students-tab" class="tab-content">
                <h3>الطلاب المسجلون</h3>
                <ul id="student-list" class="list-group">
                    <li>جارٍ تحميل الطلاب...</li>
                </ul>
                <div class="message hidden"></div>
            </div>

            <div id="add-student-tab" class="tab-content hidden">
                <h3>إضافة طالب جديد</h3>
                <div class="form-group">
                    <label for="new-student-code">رمز الطالب:</label>
                    <input type="text" id="new-student-code" placeholder="رمز فريد للطالب">
                </div>
                <div class="form-group">
                    <label for="new-student-name">اسم الطالب:</label>
                    <input type="text" id="new-student-name" placeholder="الاسم الكامل للطالب">
                </div>
                <div class="form-group">
                    <label for="new-student-hifz-start-select">بدء الحفظ من:</label>
                    <select id="new-student-hifz-start-select">
                        </select>
                </div>
                <div class="form-group">
                    <label for="new-student-murajaa-start-select">بدء المراجعة من:</label>
                    <select id="new-student-murajaa-start-select">
                        </select>
                </div>
                <button id="register-student-button" class="btn primary">تسجيل الطالب</button>
                <div id="register-student-message" class="message hidden"></div>
            </div>

            <div id="assign-tasks-tab" class="tab-content hidden">
                <h3>تعيين المهام</h3>
                <div class="form-group">
                    <label for="assign-task-student-code">رمز الطالب (للمهمة الفردية):</label>
                    <input type="text" id="assign-task-student-code" placeholder="اتركه فارغاً للمهمة الجماعية">
                </div>
                <div class="form-group">
                    <label for="assign-task-type">نوع المهمة:</label>
                    <select id="assign-task-type">
                        <option value="bank">بنك النقاط / مهمة إضافية</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="assign-task-description">وصف المهمة:</label>
                    <input type="text" id="assign-task-description" placeholder="مثال: مراجعة سورة الكهف">
                </div>
                <div class="form-group">
                    <label for="assign-task-points">النقاط:</label>
                    <input type="number" id="assign-task-points" value="5" min="1">
                </div>
                <button id="assign-individual-task-button" class="btn primary">تعيين مهمة فردية</button>
                <button id="assign-group-task-button" class="btn secondary">تعيين مهمة جماعية</button>
                <div id="assign-task-message" class="message hidden"></div>
            </div>

            <div id="manage-curriculum-tab" class="tab-content hidden">
                <h3>منهج الحفظ</h3>
                <div id="hifz-curriculum-display" class="curriculum-list">
                    <p>جارٍ تحميل منهج الحفظ...</p>
                </div>
                <h3 style="margin-top: 30px;">منهج المراجعة</h3>
                <div id="murajaa-curriculum-display" class="curriculum-list">
                    <p>جارٍ تحميل منهج المراجعة...</p>
                </div>
            </div>

        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
